"use strict";(self.webpackChunkdolna=self.webpackChunkdolna||[]).push([[415],{5700:function(e,t,n){n.d(t,{W:function(){return N},u:function(){return y}});var l=n(7294);n(3935);const a=(0,l.createContext)(null),r=a.Provider;function o(e,t){return null==t?function(t,n){return(0,l.useRef)(e(t,n))}:function(n,a){const r=(0,l.useRef)(e(n,a)),o=(0,l.useRef)(n),{instance:c}=r.current;return(0,l.useEffect)((function(){o.current!==n&&(t(c,n,o.current),o.current=n)}),[c,n,a]),r}}function c(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function s(e){return function(t){const n=function(){const e=(0,l.useContext)(a);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}(),r=e(c(t,n),n);return function(e,t){const n=(0,l.useRef)(t);(0,l.useEffect)((function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t}),[e,t])}(n.map,t.attribution),function(e,t){const n=(0,l.useRef)();(0,l.useEffect)((function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}}),[e,t])}(r.current,t.eventHandlers),function(e,t){(0,l.useEffect)((function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var n;null==(n=t.layerContainer)||n.removeLayer(e.instance),t.map.removeLayer(e.instance)}}),[t,e])}(r.current,n),r}}var u=n(7678);const i=function(e){function t(t,n){const{instance:a}=e(t).current;return(0,l.useImperativeHandle)(n,(()=>a)),null}return(0,l.forwardRef)(t)}(s(o((function(e,t){let{url:n,...l}=e;return{instance:new u.TileLayer(n,c(l,t)),context:t}}),(function(e,t,n){const{opacity:l,zIndex:a}=t;null!=l&&l!==n.opacity&&e.setOpacity(l),null!=a&&a!==n.zIndex&&e.setZIndex(a)}))));function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},m.apply(this,arguments)}function f(e){let{children:t,className:n,id:a,placeholder:o,style:c,whenCreated:s,...i}=e;const f=(0,l.useRef)(null),d=function(e,t){const[n,a]=(0,l.useState)(null);return(0,l.useEffect)((()=>{if(null!==e.current&&null===n){const n=new u.Map(e.current,t);null!=t.center&&null!=t.zoom?n.setView(t.center,t.zoom):null!=t.bounds&&n.fitBounds(t.bounds,t.boundsOptions),null!=t.whenReady&&n.whenReady(t.whenReady),a(n)}}),[e,n,t]),n}(f,i),g=(0,l.useRef)(!1);(0,l.useEffect)((()=>{null!=d&&!1===g.current&&null!=s&&(g.current=!0,s(d))}),[d,s]),(0,l.useEffect)((()=>()=>{null==d||d.remove()}),[d]);const[p]=(0,l.useState)({className:n,id:a,style:c}),E=(0,l.useMemo)((()=>d?{__version:1,map:d}:null),[d]),w=E?l.createElement(r,{value:E},t):o??null;return l.createElement("div",m({},p,{ref:f}),w)}const d=function(e,t){return function(e){function t(t,n){const{instance:a,context:o}=e(t).current;return(0,l.useImperativeHandle)(n,(()=>a)),null==t.children?null:l.createElement(r,{value:o},t.children)}return(0,l.forwardRef)(t)}(s(o(e,t)))}((function(e,t){let{position:n,...l}=e;const a=new u.Marker(n,l);return{instance:a,context:{...t,overlayContainer:a}}}),(function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}));var g=n(4340),p=n(2577),E=n(365),w=n(3279),x=n(4554),b=n(4710);var h=e=>{let{pub:t,close:n}=e,a="https://maps.google.com/maps/search/?api=1&query="+encodeURIComponent(t.Latitude+","+t.Longitude);t.GoogleMapsUrl&&(a=t.GoogleMapsUrl);let r=t.Ambience+t.Food+t.Host+t.Booze+t.Budget;return console.log(t),l.createElement("div",{className:"z-20 grow w-full basis-0 relative"},l.createElement("div",{onClick:e=>n(e),className:"z-20 icon-cross text-red text-5xl p-1 bg-gray-dark absolute -left-14"}),l.createElement("div",{className:"flex flex-col lg:flex-row gap-8"},l.createElement("div",{className:"imageWrapper flex-shrink-0 w-full lg:w-96"},l.createElement(p.Z,{image:t.Image.localFile,alt:t.Name})),l.createElement("div",{className:"contentWrapper flex-grow"},l.createElement("div",{className:"border-b border-gray-medium mb-8 pb-4"},l.createElement("div",{className:"flex content-center items-center"},l.createElement(g.Z,{className:"flex-grow"},l.createElement(b.Z,{to:"/dln/"+t.Slug},`${t.Name} (${r}/25)`)),l.createElement("div",{className:"flex gap-4"},t.pub_tags.map((e=>l.createElement(E.Z,{key:e.Slug,tag:e}))))),l.createElement("address",{className:"not-italic text-red hover:text-gray-light"},l.createElement(x.Z,{href:a},t.Address))),l.createElement("p",null,t.Description))),l.createElement("div",{className:"flex flex-col text-sm lg:flex-row mt-4 mb-4"},l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(w.ZP,{name:"Ambience",score:t.Ambience})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(w.ZP,{name:"Food",score:t.Food})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(w.ZP,{name:"Host",score:t.Host})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(w.ZP,{name:"Booze",score:t.Booze})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(w.ZP,{name:"Budget",score:t.Budget}))))};const v=()=>l.createElement(i,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://stadiamaps.com/">Stadia Maps</a>, © <a href="https://openmaptiles.org/">OpenMapTiles</a> © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),N=e=>{let{pubs:t}=e;const n=[42.6890335,23.3265247],{0:a,1:r}=(0,l.useState)(null);return"undefined"!=typeof window?l.createElement("div",{className:"flex transition-bounce"},l.createElement(f,{center:n,zoom:13,className:"z-10 grow w-full h-full min-h-full min-h-full-page"},l.createElement(v,null),t.map(((e,t)=>l.createElement(d,{key:e.node.id,position:[e.node.Latitude,e.node.Longitude],eventHandlers:{click:()=>{r(t)}}})))),a&&l.createElement(h,{close:()=>{r(null)},pub:t[a].node})):null},y=e=>{let{lat:t,lng:n}=e;const a=[t,n];return"undefined"!=typeof window?l.createElement(f,{center:a,zoom:15,className:"h-full"},l.createElement(v,null),l.createElement(d,{position:a})):null}},5968:function(e,t,n){var l=n(7294);t.Z=e=>{let{children:t,className:n,...a}=e;return n=" text-6xl mb-4 font-fancy text-red lg:text-7xl "+n,l.createElement("h1",Object.assign({className:n},a),t)}},6347:function(e,t,n){n.r(t);var l=n(7294),a=n(7607),r=n(5968),o=n(2577),c=n(4710),s=n(4554),u=n(3279),i=n(5700);t.default=e=>{let{pageContext:t,location:n}=e;console.log(n);const{pub:m}=t;let f="https://maps.google.com/maps/search/?api=1&query="+encodeURIComponent(m.Latitude+","+m.Longitude);return m.GoogleMapsUrl&&(f=m.GoogleMapsUrl),l.createElement(a.Z,null,l.createElement("div",{className:"h-third w-full lg:h-half"},l.createElement(o.Z,{image:m.Image.localFile,alt:m.Name})),l.createElement("div",{className:"container mx-auto mt-20 text-2xl lg:max-w-screen-lg"},l.createElement("div",{className:"py-6 uppercase"},l.createElement(c.Z,{to:"/dolna-lista"},"« Всички долни")),l.createElement(r.Z,{className:"text-white"},m.Name),l.createElement("address",{className:"not-italic text-red hover:text-gray-light"},l.createElement(s.Z,{href:f},m.Address)),l.createElement("div",{className:"flex gap-4 text-5xl my-12"},l.createElement("div",{className:"text-2xl flex flex-wrap content-center"},"сподели в:"),l.createElement(s.Z,{rel:"nofollow",title:"Facebook",href:"http://www.facebook.com/sharer.php?u="+encodeURIComponent(n.href)},l.createElement("span",{className:"icon-facebook"}),l.createElement("span",{className:"sr-only"},"Сподели в facebook")),l.createElement(s.Z,{rel:"nofollow",title:"LinkedIn",href:"http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(n.href)},l.createElement("span",{className:"icon-linkedin"}),l.createElement("span",{className:"sr-only"},"Сподели в LinkedIn")),l.createElement(s.Z,{rel:"nofollow",title:"Twitter",href:"http://twitter.com/share?url="+encodeURIComponent(n.href)},l.createElement("span",{className:"icon-twitter"}))),l.createElement("div",{className:"max-w-screen-sm"},m.Description),l.createElement("div",{className:"flex font text-base flex-col my-8 gap-4 max-w-3xl"},l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(u.hc,{name:"Ambience",score:m.Ambience})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(u.hc,{name:"Food",score:m.Food})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(u.hc,{name:"Host",score:m.Host})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(u.hc,{name:"Booze",score:m.Booze})),l.createElement("div",{className:"w-full mb-2 lg:w-auto lg:mb-0 lg:flex-grow"},l.createElement(u.hc,{name:"Budget",score:m.Budget})))),l.createElement("div",{style:{height:450}},l.createElement(i.u,{lat:m.Latitude,lng:m.Longitude})))}}}]);
//# sourceMappingURL=component---src-templates-pub-js-281284200e556d156091.js.map